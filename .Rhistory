if (LOG == TRUE) {
df <- df %>% mutate_if(is.numeric, ~log10(.))
expr_labs <- expression("log"[10]*"(PDF/m"^2*")")
end_name = "_log"
hist_xlim = c(-17,-9)
} else if (LOG == FALSE) {
expr_labs <- expression("PDF/m"^2)
end_name = ""
hist_xlim = c(0,1.0e-12)
}
df[df == -Inf] <- NA                          # 6 values are == -Inf
df_longer <- data.frame(pivot_longer(df, cols = all_of(levs), names_to = "Category", values_to = "Values"))
df_longer[sapply(df_longer, is.nan)] <- NA
df_longer$Category = factor(df_longer$Category, levels = levs, labels = labs)
l = length(df)
denom = "max"
comparison_df <- rel.diff(df, levs, denom)
comparison_df <- comparison_df %>% pivot_longer(cols = levs, names_to = "Category", values_to = "Values")
comparison_df$Reference = factor(comparison_df$Reference, levels = levs, labels = labs)
comparison_df$Category = factor(comparison_df$Category, levels = levs, labels = labs)
pal <- "RdBu"
png(file = paste0("./rel-diff", middle_name, end_name, "_", denom, ".png"), width = 12, height = 12, res = 600, units = "in")
figure <- ggplot(comparison_df, aes(Category, Reference, fill = Values)) +
geom_tile() +
theme(axis.text.x = element_text(angle = 90), axis.text = element_text(size = 17)) + #, axis.title = element_blank()) +
scale_fill_distiller(palette = pal, na.value = "gray96")
figure
dev.off()
comparison_df_noRIL <- comparison_df %>% filter(Reference != "Reduced Impact Logging" & Category != "Reduced Impact Logging")
png(file = paste0("./rel-diff_noRIL", middle_name, end_name, "_", denom, ".png"), width = 12, height = 12, res = 600, units = "in")
figure <- ggplot(comparison_df_noRIL, aes(Category, Reference, fill = Values)) +
geom_tile() +
theme(axis.text.x= element_text(angle = 90), axis.text = element_text(size = 17)) + #, axis.title = element_blank()) +
scale_fill_distiller(palette = pal, na.value = "gray96")
figure
dev.off()
l = length(df)
denom = "mean"
comparison_df <- rel.diff(df, levs, denom)
comparison_df <- comparison_df %>% pivot_longer(cols = levs, names_to = "Category", values_to = "Values")
comparison_df$Reference = factor(comparison_df$Reference, levels = levs, labels = labs)
comparison_df$Category = factor(comparison_df$Category, levels = levs, labels = labs)
pal <- "RdBu"
png(file = paste0("./rel-diff", middle_name, end_name, "_", denom, ".png"), width = 12, height = 12, res = 600, units = "in")
figure <- ggplot(comparison_df, aes(Category, Reference, fill = Values)) +
geom_tile() +
theme(axis.text.x = element_text(angle = 90), axis.text = element_text(size = 17)) + #, axis.title = element_blank()) +
scale_fill_distiller(palette = pal, na.value = "gray96")
figure
dev.off()
comparison_df_noRIL <- comparison_df %>% filter(Reference != "Reduced Impact Logging" & Category != "Reduced Impact Logging")
png(file = paste0("./rel-diff_noRIL", middle_name, end_name, "_", denom, ".png"), width = 12, height = 12, res = 600, units = "in")
figure <- ggplot(comparison_df_noRIL, aes(Category, Reference, fill = Values)) +
geom_tile() +
theme(axis.text.x= element_text(angle = 90), axis.text = element_text(size = 17)) + #, axis.title = element_blank()) +
scale_fill_distiller(palette = pal, na.value = "gray96")
figure
dev.off()
# l = length(df)
l = length(df)
denom = "mean"
comparison_df <- rel.diff(df, levs, denom)
comparison_df <- comparison_df %>% pivot_longer(cols = levs, names_to = "Category", values_to = "Values")
comparison_df$Reference = factor(comparison_df$Reference, levels = levs, labels = labs)
comparison_df$Category = factor(comparison_df$Category, levels = levs, labels = labs)
pal <- "RdBu"
png(file = paste0("./rel-diff", middle_name, end_name, "_", denom, ".png"), width = 12, height = 12, res = 600, units = "in")
figure <- ggplot(comparison_df, aes(Category, Reference, fill = Values)) +
geom_tile() +
theme(axis.text.x = element_text(angle = 90), axis.text = element_text(size = 17),
axis.title = element_text(size = 20), legend.text = element_text(size = 15)) + #, axis.title = element_blank()) +
scale_fill_distiller(palette = pal, na.value = "gray96")
figure
dev.off()
comparison_df_noRIL <- comparison_df %>% filter(Reference != "Reduced Impact Logging" & Category != "Reduced Impact Logging")
png(file = paste0("./rel-diff_noRIL", middle_name, end_name, "_", denom, ".png"), width = 12, height = 12, res = 600, units = "in")
figure <- ggplot(comparison_df_noRIL, aes(Category, Reference, fill = Values)) +
geom_tile() +
theme(axis.text.x= element_text(angle = 90), axis.text = element_text(size = 17),
axis.title = element_text(size = 20), legend.text = element_text(size = 15)) + #, axis.title = element_blank()) +
scale_fill_distiller(palette = pal, na.value = "gray96")
figure
dev.off()
l = length(df)
denom = "mean"
comparison_df <- rel.diff(df, levs, denom)
comparison_df <- comparison_df %>% pivot_longer(cols = levs, names_to = "Category", values_to = "Values")
comparison_df$Reference = factor(comparison_df$Reference, levels = levs, labels = labs)
comparison_df$Category = factor(comparison_df$Category, levels = levs, labels = labs)
pal <- "RdBu"
png(file = paste0("./rel-diff", middle_name, end_name, "_", denom, ".png"), width = 12, height = 12, res = 600, units = "in")
figure <- ggplot(comparison_df, aes(Category, Reference, fill = Values)) +
geom_tile() +
theme(axis.text.x = element_text(angle = 90), axis.text = element_text(size = 17),
axis.title = element_text(size = 20), legend.text = element_text(size = 11),
legend.title = element_blank(size = 15)) + #, axis.title = element_blank()) +
scale_fill_distiller(palette = pal, na.value = "gray96")
l = length(df)
denom = "mean"
comparison_df <- rel.diff(df, levs, denom)
comparison_df <- comparison_df %>% pivot_longer(cols = levs, names_to = "Category", values_to = "Values")
comparison_df$Reference = factor(comparison_df$Reference, levels = levs, labels = labs)
comparison_df$Category = factor(comparison_df$Category, levels = levs, labels = labs)
pal <- "RdBu"
png(file = paste0("./rel-diff", middle_name, end_name, "_", denom, ".png"), width = 12, height = 12, res = 600, units = "in")
figure <- ggplot(comparison_df, aes(Category, Reference, fill = Values)) +
geom_tile() +
theme(axis.text.x = element_text(angle = 90), axis.text = element_text(size = 17),
axis.title = element_text(size = 20), legend.text = element_text(size = 11),
legend.title = element_text(size = 15)) + #, axis.title = element_blank()) +
scale_fill_distiller(palette = pal, na.value = "gray96")
figure
dev.off()
comparison_df_noRIL <- comparison_df %>% filter(Reference != "Reduced Impact Logging" & Category != "Reduced Impact Logging")
png(file = paste0("./rel-diff_noRIL", middle_name, end_name, "_", denom, ".png"), width = 12, height = 12, res = 600, units = "in")
figure <- ggplot(comparison_df_noRIL, aes(Category, Reference, fill = Values)) +
geom_tile() +
theme(axis.text.x= element_text(angle = 90), axis.text = element_text(size = 17),
axis.title = element_text(size = 20), legend.text = element_text(size = 11),
legend.title = element_text(size = 15)) + #, axis.title = element_blank()) +
scale_fill_distiller(palette = pal, na.value = "gray96")
figure
dev.off()
l = length(df)
denom = "mean"
comparison_df <- rel.diff(df, levs, denom)
comparison_df <- comparison_df %>% pivot_longer(cols = levs, names_to = "Category", values_to = "Values")
comparison_df$Reference = factor(comparison_df$Reference, levels = levs, labels = labs)
comparison_df$Category = factor(comparison_df$Category, levels = levs, labels = labs)
pal <- "RdBu"
png(file = paste0("./rel-diff", middle_name, end_name, "_", denom, ".png"), width = 12, height = 12, res = 600, units = "in")
figure <- ggplot(comparison_df, aes(Category, Reference, fill = Values)) +
geom_tile() +
theme(axis.text.x = element_text(angle = 90), axis.text = element_text(size = 17),
axis.title = element_text(size = 20), legend.text = element_text(size = 12),
legend.title = element_text(size = 15)) + #, axis.title = element_blank()) +
scale_fill_distiller(palette = pal, na.value = "gray96")
figure
dev.off()
comparison_df_noRIL <- comparison_df %>% filter(Reference != "Reduced Impact Logging" & Category != "Reduced Impact Logging")
png(file = paste0("./rel-diff_noRIL", middle_name, end_name, "_", denom, ".png"), width = 12, height = 12, res = 600, units = "in")
figure <- ggplot(comparison_df_noRIL, aes(Category, Reference, fill = Values)) +
geom_tile() +
theme(axis.text.x= element_text(angle = 90), axis.text = element_text(size = 17),
axis.title = element_text(size = 20), legend.text = element_text(size = 12),
legend.title = element_text(size = 15)) + #, axis.title = element_blank()) +
scale_fill_distiller(palette = pal, na.value = "gray96")
figure
dev.off()
LOG = FALSE
Cat = 4           #1: Managed forests 2: Pastures and crops 3:  all land use classes from Chaudhary 2018  4: all land use classes from Chaudhary 2015
if (Cat == 1) {
df <- read.csv("./Chaudhary_2018_ManagedForest_Plantations.csv", header = TRUE)
levs <- c("CF_RIL", "CF_SelectiveLogging", "CF_ClearCut", "CF_MinPlantation", "CF_LtPlantation", "CF_IntPlantation")
labs <-  c("Reduced Impact Logging", "Selective logging", "Clear-cut", "Minimal Plantation", "Light Plantation", "Intense Plantation")
middle_name <- "_ManagedForests"
} else if(Cat == 2) {
df <- read.csv("./Chaudhary_2018_Pastures_Crops.csv", header = TRUE)
levs <- c("CF_MinPasture", "CF_LtPasture", "CF_IntPasture", "CF_MinCrop", "CF_LtCrop", "CF_IntCrop")
labs <-  c("Pasture - Minimal use", "Pasture - Light use", "Pasture - Intense use", "Crops - Minimal use", "Crops - Light use", "Crop - Intense use")
middle_name <- "_Pastures-Crops"
} else if(Cat == 3) {
df <- read.csv("./Chaudhary_2018_all-land-uses.csv", header = TRUE)
levs <- c("CF_RIL", "CF_SelectiveLogging", "CF_ClearCut", "CF_MinPlantation", "CF_LtPlantation", "CF_IntPlantation",
"CF_MinPasture", "CF_LtPasture", "CF_IntPasture", "CF_MinCrop", "CF_LtCrop", "CF_IntCrop", "CF_MinUrban", "CF_LtUrban", "CF_IntUrban")
labs <-  c("Reduced Impact Logging", "Selective logging", "Clear-cut", "Minimal Plantation", "Light Plantation",
"Intense Plantation", "Pasture - Minimal use", "Pasture - Light use", "Pasture - Intense use", "Crops - Minimal use",
"Crops - Light use", "Crop - Intense use", "Urban - Minimal", "Urban - Light", "Urban - Intense")
middle_name <- "_all"
} else if(Cat == 4) {
df <- read.csv("./Chaudhary_2015_all-land-uses.csv", header = TRUE)
levs <- c("CF_Annual", "CF_Permanent", "CF_Pasture", "CF_Urban", "CF_ExtForest", "CF_IntForest")
labs <-  c("Annual crops", "Permanent crops", "Pastures", "Urban", "Extensive forestry", "Intensive forestry")
middle_name <- "_all_2015"
}
df[sapply(df, is.nan)] <- NA
means_dec <- df %>% summarise_if(is.numeric, mean, na.rm = TRUE)
sds_dec <- df %>% summarise_if(is.numeric, sd, na.rm = TRUE)
print(means_dec, digits = 2)
print(sds_dec, digits = 2)
if (LOG == TRUE) {
df <- df %>% mutate_if(is.numeric, ~log10(.))
expr_labs <- expression("log"[10]*"(PDF/m"^2*")")
end_name = "_log"
hist_xlim = c(-17,-9)
} else if (LOG == FALSE) {
expr_labs <- expression("PDF/m"^2)
end_name = ""
hist_xlim = c(0,1.0e-12)
}
df[df == -Inf] <- NA                          # 6 values are == -Inf
df_longer <- data.frame(pivot_longer(df, cols = all_of(levs), names_to = "Category", values_to = "Values"))
df_longer[sapply(df_longer, is.nan)] <- NA
df_longer$Category = factor(df_longer$Category, levels = levs, labels = labs)
l = length(df)
denom = "mean"
comparison_df <- rel.diff(df, levs, denom)
comparison_df <- comparison_df %>% pivot_longer(cols = levs, names_to = "Category", values_to = "Values")
comparison_df$Reference = factor(comparison_df$Reference, levels = levs, labels = labs)
comparison_df$Category = factor(comparison_df$Category, levels = levs, labels = labs)
pal <- "RdBu"
png(file = paste0("./rel-diff", middle_name, end_name, "_", denom, ".png"), width = 12, height = 12, res = 600, units = "in")
figure <- ggplot(comparison_df, aes(Category, Reference, fill = Values)) +
geom_tile() +
theme(axis.text.x = element_text(angle = 90), axis.text = element_text(size = 17),
axis.title = element_text(size = 20), legend.text = element_text(size = 12),
legend.title = element_text(size = 15)) + #, axis.title = element_blank()) +
scale_fill_distiller(palette = pal, na.value = "gray96")
figure
dev.off()
comparison_df_noRIL <- comparison_df %>% filter(Reference != "Reduced Impact Logging" & Category != "Reduced Impact Logging")
png(file = paste0("./rel-diff_noRIL", middle_name, end_name, "_", denom, ".png"), width = 12, height = 12, res = 600, units = "in")
figure <- ggplot(comparison_df_noRIL, aes(Category, Reference, fill = Values)) +
geom_tile() +
theme(axis.text.x= element_text(angle = 90), axis.text = element_text(size = 17),
axis.title = element_text(size = 20), legend.text = element_text(size = 12),
legend.title = element_text(size = 15)) + #, axis.title = element_blank()) +
scale_fill_distiller(palette = pal, na.value = "gray96")
figure
dev.off()
LOG = FALSE
Cat = 5           #1: Managed forests 2: Pastures and crops 3:  all land use classes from Chaudhary 2018  4: all land use classes from Chaudhary 2015 5: all land use classes from Chaudhary 2016 (LCImpact)
if (Cat == 1) {
df <- read.csv("./Chaudhary_2018_ManagedForest_Plantations.csv", header = TRUE)
levs <- c("CF_RIL", "CF_SelectiveLogging", "CF_ClearCut", "CF_MinPlantation", "CF_LtPlantation", "CF_IntPlantation")
labs <-  c("Reduced Impact Logging", "Selective logging", "Clear-cut", "Minimal Plantation", "Light Plantation", "Intense Plantation")
middle_name <- "_ManagedForests"
} else if(Cat == 2) {
df <- read.csv("./Chaudhary_2018_Pastures_Crops.csv", header = TRUE)
levs <- c("CF_MinPasture", "CF_LtPasture", "CF_IntPasture", "CF_MinCrop", "CF_LtCrop", "CF_IntCrop")
labs <-  c("Pasture - Minimal use", "Pasture - Light use", "Pasture - Intense use", "Crops - Minimal use", "Crops - Light use", "Crop - Intense use")
middle_name <- "_Pastures-Crops"
} else if(Cat == 3) {
df <- read.csv("./Chaudhary_2018_all-land-uses.csv", header = TRUE)
levs <- c("CF_RIL", "CF_SelectiveLogging", "CF_ClearCut", "CF_MinPlantation", "CF_LtPlantation", "CF_IntPlantation",
"CF_MinPasture", "CF_LtPasture", "CF_IntPasture", "CF_MinCrop", "CF_LtCrop", "CF_IntCrop", "CF_MinUrban", "CF_LtUrban", "CF_IntUrban")
labs <-  c("Reduced Impact Logging", "Selective logging", "Clear-cut", "Minimal Plantation", "Light Plantation",
"Intense Plantation", "Pasture - Minimal use", "Pasture - Light use", "Pasture - Intense use", "Crops - Minimal use",
"Crops - Light use", "Crop - Intense use", "Urban - Minimal", "Urban - Light", "Urban - Intense")
middle_name <- "_all"
} else if(Cat == 4) {
df <- read.csv("./Chaudhary_2015_all-land-uses.csv", header = TRUE)
levs <- c("CF_Annual", "CF_Permanent", "CF_Pasture", "CF_Urban", "CF_ExtForest", "CF_IntForest")
labs <-  c("Annual crops", "Permanent crops", "Pastures", "Urban", "Extensive forestry", "Intensive forestry")
middle_name <- "_all_2015"
} else if(Cat == 5) {
df <- read.csv("./Chaudhary_2016_all-land-uses.csv", header = TRUE)
levs <- c("CF_Annual", "CF_Permanent", "CF_Pasture", "CF_Urban", "CF_ExtForest", "CF_IntForest")
labs <-  c("Annual crops", "Permanent crops", "Pastures", "Urban", "Extensive forestry", "Intensive forestry")
middle_name <- "_all_2016"
}
df[sapply(df, is.nan)] <- NA
means_dec <- df %>% summarise_if(is.numeric, mean, na.rm = TRUE)
sds_dec <- df %>% summarise_if(is.numeric, sd, na.rm = TRUE)
print(means_dec, digits = 2)
print(sds_dec, digits = 2)
if (LOG == TRUE) {
df <- df %>% mutate_if(is.numeric, ~log10(.))
expr_labs <- expression("log"[10]*"(PDF/m"^2*")")
end_name = "_log"
hist_xlim = c(-17,-9)
} else if (LOG == FALSE) {
expr_labs <- expression("PDF/m"^2)
end_name = ""
hist_xlim = c(0,1.0e-12)
}
df[df == -Inf] <- NA                          # 6 values are == -Inf
df_longer <- data.frame(pivot_longer(df, cols = all_of(levs), names_to = "Category", values_to = "Values"))
df_longer[sapply(df_longer, is.nan)] <- NA
df_longer$Category = factor(df_longer$Category, levels = levs, labels = labs)
l = length(df)
denom = "mean"
comparison_df <- rel.diff(df, levs, denom)
comparison_df <- comparison_df %>% pivot_longer(cols = levs, names_to = "Category", values_to = "Values")
comparison_df$Reference = factor(comparison_df$Reference, levels = levs, labels = labs)
comparison_df$Category = factor(comparison_df$Category, levels = levs, labels = labs)
pal <- "RdBu"
png(file = paste0("./rel-diff", middle_name, end_name, "_", denom, ".png"), width = 12, height = 12, res = 600, units = "in")
figure <- ggplot(comparison_df, aes(Category, Reference, fill = Values)) +
geom_tile() +
theme(axis.text.x = element_text(angle = 90), axis.text = element_text(size = 17),
axis.title = element_text(size = 20), legend.text = element_text(size = 12),
legend.title = element_text(size = 15)) + #, axis.title = element_blank()) +
scale_fill_distiller(palette = pal, na.value = "gray96")
figure
dev.off()
comparison_df_noRIL <- comparison_df %>% filter(Reference != "Reduced Impact Logging" & Category != "Reduced Impact Logging")
png(file = paste0("./rel-diff_noRIL", middle_name, end_name, "_", denom, ".png"), width = 12, height = 12, res = 600, units = "in")
figure <- ggplot(comparison_df_noRIL, aes(Category, Reference, fill = Values)) +
geom_tile() +
theme(axis.text.x= element_text(angle = 90), axis.text = element_text(size = 17),
axis.title = element_text(size = 20), legend.text = element_text(size = 12),
legend.title = element_text(size = 15)) + #, axis.title = element_blank()) +
scale_fill_distiller(palette = pal, na.value = "gray96")
figure
dev.off()
df[sapply(df, is.nan)] <- NA
means_dec <- df %>% summarise_if(is.numeric, mean, na.rm = TRUE)
sds_dec <- df %>% summarise_if(is.numeric, sd, na.rm = TRUE)
print(means_dec, digits = 2)
print(sds_dec, digits = 2)
if (LOG == TRUE) {
df <- df %>% mutate_if(is.numeric, ~log10(.))
expr_labs <- expression("log"[10]*"(PDF/m"^2*")")
end_name = "_log"
hist_xlim = c(-17,-9)
} else if (LOG == FALSE) {
expr_labs <- expression("PDF/m"^2)
end_name = ""
hist_xlim = c(0,1.0e-12)
}
df[df == -Inf] <- NA                          # 6 values are == -Inf
df_longer <- data.frame(pivot_longer(df, cols = all_of(levs), names_to = "Category", values_to = "Values"))
df_longer[sapply(df_longer, is.nan)] <- NA
df_longer$Category = factor(df_longer$Category, levels = levs, labels = labs)
l = length(df)
denom = "mean"
comparison_df <- rel.diff(df, levs, denom)
comparison_df <- comparison_df %>% pivot_longer(cols = levs, names_to = "Category", values_to = "Values")
comparison_df$Reference = factor(comparison_df$Reference, levels = levs, labels = labs)
comparison_df$Category = factor(comparison_df$Category, levels = levs, labels = labs)
pal <- "RdBu"
png(file = paste0("./rel-diff", middle_name, end_name, "_", denom, ".png"), width = 12, height = 12, res = 600, units = "in")
figure <- ggplot(comparison_df, aes(Category, Reference, fill = Values)) +
geom_tile() +
theme(axis.text.x = element_text(angle = 90), axis.text = element_text(size = 17),
axis.title = element_text(size = 20), legend.text = element_text(size = 12),
legend.title = element_text(size = 15)) + #, axis.title = element_blank()) +
scale_fill_distiller(palette = pal, na.value = "gray96")
figure
dev.off()
comparison_df_noRIL <- comparison_df %>% filter(Reference != "Reduced Impact Logging" & Category != "Reduced Impact Logging")
png(file = paste0("./rel-diff_noRIL", middle_name, end_name, "_", denom, ".png"), width = 12, height = 12, res = 600, units = "in")
figure <- ggplot(comparison_df_noRIL, aes(Category, Reference, fill = Values)) +
geom_tile() +
theme(axis.text.x= element_text(angle = 90), axis.text = element_text(size = 17),
axis.title = element_text(size = 20), legend.text = element_text(size = 12),
legend.title = element_text(size = 15)) + #, axis.title = element_blank()) +
scale_fill_distiller(palette = pal, na.value = "gray96")
figure
dev.off()
LOG = TRUE
df[sapply(df, is.nan)] <- NA
means_dec <- df %>% summarise_if(is.numeric, mean, na.rm = TRUE)
sds_dec <- df %>% summarise_if(is.numeric, sd, na.rm = TRUE)
print(means_dec, digits = 2)
print(sds_dec, digits = 2)
if (LOG == TRUE) {
df <- df %>% mutate_if(is.numeric, ~log10(.))
expr_labs <- expression("log"[10]*"(PDF/m"^2*")")
end_name = "_log"
hist_xlim = c(-17,-9)
} else if (LOG == FALSE) {
expr_labs <- expression("PDF/m"^2)
end_name = ""
hist_xlim = c(0,1.0e-12)
}
df[df == -Inf] <- NA                          # 6 values are == -Inf
df_longer <- data.frame(pivot_longer(df, cols = all_of(levs), names_to = "Category", values_to = "Values"))
df_longer[sapply(df_longer, is.nan)] <- NA
df_longer$Category = factor(df_longer$Category, levels = levs, labels = labs)
LOG = TRUE
Cat = 5           #1: Managed forests 2: Pastures and crops 3:  all land use classes from Chaudhary 2018  4: all land use classes from Chaudhary 2015 5: all land use classes from Chaudhary 2016 (LCImpact)
if (Cat == 1) {
df <- read.csv("./Chaudhary_2018_ManagedForest_Plantations.csv", header = TRUE)
levs <- c("CF_RIL", "CF_SelectiveLogging", "CF_ClearCut", "CF_MinPlantation", "CF_LtPlantation", "CF_IntPlantation")
labs <-  c("Reduced Impact Logging", "Selective logging", "Clear-cut", "Minimal Plantation", "Light Plantation", "Intense Plantation")
middle_name <- "_ManagedForests"
} else if(Cat == 2) {
df <- read.csv("./Chaudhary_2018_Pastures_Crops.csv", header = TRUE)
levs <- c("CF_MinPasture", "CF_LtPasture", "CF_IntPasture", "CF_MinCrop", "CF_LtCrop", "CF_IntCrop")
labs <-  c("Pasture - Minimal use", "Pasture - Light use", "Pasture - Intense use", "Crops - Minimal use", "Crops - Light use", "Crop - Intense use")
middle_name <- "_Pastures-Crops"
} else if(Cat == 3) {
df <- read.csv("./Chaudhary_2018_all-land-uses.csv", header = TRUE)
levs <- c("CF_RIL", "CF_SelectiveLogging", "CF_ClearCut", "CF_MinPlantation", "CF_LtPlantation", "CF_IntPlantation",
"CF_MinPasture", "CF_LtPasture", "CF_IntPasture", "CF_MinCrop", "CF_LtCrop", "CF_IntCrop", "CF_MinUrban", "CF_LtUrban", "CF_IntUrban")
labs <-  c("Reduced Impact Logging", "Selective logging", "Clear-cut", "Minimal Plantation", "Light Plantation",
"Intense Plantation", "Pasture - Minimal use", "Pasture - Light use", "Pasture - Intense use", "Crops - Minimal use",
"Crops - Light use", "Crop - Intense use", "Urban - Minimal", "Urban - Light", "Urban - Intense")
middle_name <- "_all"
} else if(Cat == 4) {
df <- read.csv("./Chaudhary_2015_all-land-uses.csv", header = TRUE)
levs <- c("CF_Annual", "CF_Permanent", "CF_Pasture", "CF_Urban", "CF_ExtForest", "CF_IntForest")
labs <-  c("Annual crops", "Permanent crops", "Pastures", "Urban", "Extensive forestry", "Intensive forestry")
middle_name <- "_all_2015"
} else if(Cat == 5) {
df <- read.csv("./Chaudhary_2016_all-land-uses.csv", header = TRUE)
levs <- c("CF_Annual", "CF_Permanent", "CF_Pasture", "CF_Urban", "CF_ExtForest", "CF_IntForest")
labs <-  c("Annual crops", "Permanent crops", "Pastures", "Urban", "Extensive forestry", "Intensive forestry")
middle_name <- "_all_2016"
}
df[sapply(df, is.nan)] <- NA
means_dec <- df %>% summarise_if(is.numeric, mean, na.rm = TRUE)
sds_dec <- df %>% summarise_if(is.numeric, sd, na.rm = TRUE)
print(means_dec, digits = 2)
print(sds_dec, digits = 2)
if (LOG == TRUE) {
df <- df %>% mutate_if(is.numeric, ~log10(.))
expr_labs <- expression("log"[10]*"(PDF/m"^2*")")
end_name = "_log"
hist_xlim = c(-17,-9)
} else if (LOG == FALSE) {
expr_labs <- expression("PDF/m"^2)
end_name = ""
hist_xlim = c(0,1.0e-12)
}
df[df == -Inf] <- NA                          # 6 values are == -Inf
df_longer <- data.frame(pivot_longer(df, cols = all_of(levs), names_to = "Category", values_to = "Values"))
df_longer[sapply(df_longer, is.nan)] <- NA
df_longer$Category = factor(df_longer$Category, levels = levs, labels = labs)
means <- df %>% summarise_if(is.numeric, mean, na.rm = TRUE)
sds <- df %>% summarise_if(is.numeric, sd, na.rm = TRUE)
stat_data <- bind_cols(data.frame(t(means)), data.frame(t(3*sds)))
names(stat_data) <- c("mean", "CI")
stat_data$Category <- row.names(stat_data)
row.names(stat_data) <- NULL
stat_data$Category = factor(stat_data$Category, levels = levs, labels = labs)
png(file = paste0("./mean_sd", middle_name, end_name, ".png"), width = 12, height = 6, res = 600, units = "in")
figure <- ggplot(stat_data, aes(x = Category, y = mean, group = Category, color = Category)) + # filter(df_longer, Values < 5e-12)
geom_point() +
geom_errorbar(aes(ymin = mean - unlist(CI), ymax = unlist(mean) + unlist(CI)), width=.2)
theme(axis.text.x= element_text(size = 10, angle = 90))
figure
dev.off()
png(file = paste0("./boxplots", middle_name, end_name, ".png"), width = 12, height = 6, res = 600, units = "in")
figure <- ggplot(df_longer, aes(x = Category, y = Values, group = Category, color = Category)) + # filter(df_longer, Values < 5e-12)
geom_boxplot(width = 0.5) +
theme(axis.text.x= element_text(size = 10, angle = 90))
figure
dev.off()
col_CF <- names(df %>% select(-eco_code))
dev.new()
png(file = paste0("./histograms", middle_name, end_name, ".png"), width = 12, height = 6, res = 600, units = "in")
par(mfrow = c(2,3))
if (Cat == 3) {par(mfrow = c(3,6))}
n <- 0
for (i in col_CF) {
data <- df[,i]
n <- n + 1
if(LOG == FALSE) {data <- df[df[n+1] < 1.0e-12, i]}
hist(data, main = labs[n], xlab = expr_labs, xlim = hist_xlim)
}
dev.off()
png(file = paste0("CF_ecoregions", middle_name, end_name, ".png"), width = 12, height = 6, res = 600, units = "in")
figure <- ggplot(data = df_longer, aes(x = eco_code, y = Values, color = Category, linetype = Category)) +
geom_point(size = 1) +
theme_classic() +
labs(x = "Ecoregions", y = expr_labs) +
theme(legend.position = "bottom", legend.text = element_text(size = 13), axis.text.x = element_blank())
figure
dev.off()
?Titanic
Titanic <- as.data.frame(Titanic)
head(Titanic)
setwd("C:/Users/Rosa/Documents/GitHub/forest-management")
library(pacman)
p_load(dplyr, tidyr, abind, tidyverse, stringr)  # dataframe management and string management
p_load(ggplot2, colorspace, scico, viridis, RColorBrewer, gridExtra, nord, ggpubr, sf, sp, rgdal) # plotting
select <- dplyr::select
EU_coutry_wood <- read.csv("./grouped_land_use_files/EU_country_2020_noAF.csv")
rm(Titanic)
rm(EU_coutry_wood)
df <- read.csv("./grouped_land_use_files/EU_country_2020_noAF.csv")
heaD(df)
head(df)
df <- df %>% rename(as.character(2020) = X2020)
as.character(2020)
names(df)
?rename
df <- df %>% rename(2020 = X2020)
df <- df %>% rename(Year2020 = X2020)
df <- read.csv("./grouped_land_use_files/EU_country_2020_noAF.csv")
df <- df %>% rename(Values = X2020) %>%
mutate(Year = 2020)
head(df)
df <- read.csv("./grouped_land_use_files/EU_country_2020_noAF.csv")
df <- df %>% rename(Mm3 = X2020) %>%
mutate(Year = 2020)
head(df)
df <- read.csv("./grouped_land_use_files/EU_country_2020_noAF.csv")
df <- df %>% rename(Wood_Mm3 = X2020) %>%
mutate(Year = 2020)
df <- read.csv("./grouped_land_use_files/EU_country_2020_noAF.csv")
df <- df %>% rename(Wood_Mm3 = X2020) %>%
mutate(Year = 2020)
head(df)
p_load(ggplot2, colorspace, scico, viridis, RColorBrewer, nord, sf, sp, ggalluvial) # plotting
select <- dplyr::select
gg <- ggplot(data = df , aes(y = Wood_Mm3, axis1 = Category, axis2 = Country)) +
geom_alluvium(aes(fill = Category))
gg
gg <- ggplot(data = df , aes(y = Wood_Mm3, axis1 = Category, axis2 = Country)) +
geom_alluvium(aes(fill = Category)) +
geom_stratum()
gg
gg <- ggplot(data = df , aes(y = Wood_Mm3, axis1 = Category, axis2 = Country)) +
geom_alluvium(aes(fill = Category)) +
geom_stratum() +
geom_text(stat = "stratum", aes(label = after_stat(stratum)))
gg
gg <- ggplot(data = df %>% filter(Country != "EU28"), aes(y = Wood_Mm3, axis1 = Category, axis2 = Country)) +
geom_alluvium(aes(fill = Category)) +
geom_stratum() +
geom_text(stat = "stratum", aes(label = after_stat(stratum)))
gg
unique(df$Category)
gg <- ggplot(data = df %>% filter(Country != "EU28" & Category == "Wood_forest_im"), aes(y = Wood_Mm3, axis1 = Category, axis2 = Country)) +
geom_alluvium(aes(fill = Category)) +
geom_stratum() +
geom_text(stat = "stratum", aes(label = after_stat(stratum)))
gg
